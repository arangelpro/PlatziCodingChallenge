<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Reto 7: Piedra, papel o tijera</title>
	</head>
	<style>
		body{
			display: flex;
			flex-direction: column;
			align-items: center;
		}
	</style>
	<body>
		<div class="jugador1">
			<label for="pptSelect1">Jugador 1</label>
			<select name="pptSelect1" id="pptSelect1">
				<option value="">Seleccione una opción</option>
				<option value="piedra">Piedra</option>
				<option value="papel">Papel</option>
				<option value="tijera">Tijera</option>
			</select>
		</div>
		<div class="jugador2">
			<label for="pptSelect2">Jugador 2</label>
			<select name="pptSelect2" id="pptSelect2">
				<option value="">Seleccione una opción</option>
				<option value="piedra">Piedra</option>
				<option value="papel">Papel</option>
				<option value="tijera">Tijera</option>
			</select>
		</div>
		<button type="button" onclick="handleGame()">Jugar!</button>
		<ul id="ul"></ul>
		<h2 id="result"></h2>
		<script>
			const values = [
				{
					value: "piedra",
					lost: "papel",
					win: "tijera"
				},
				{
					value: "papel",
					lost: "tijera",
					win: "piedra"
				},
				{
					value: "tijera",
					lost: "piedra",
					win: "papel"
				}
			];
			let game = {
				jugador1: 0,
				jugador2: 0,
				totalGame: 0
			}
			function ppt(jugador1, jugador2) {				
				if(jugador1 === jugador2) {
					return "empate";
				} else {
					const item = values.find(item => item.value === jugador1)
					if(item.win === jugador2) {
						return "jugador1";
					} else {
						return "jugador2";
					}
				}
			}
		
			function handleGame() {
				let pptSelect1 = document.getElementById("pptSelect1");
				let pptSelect2 = document.getElementById("pptSelect2");

				if(!pptSelect1.value || !pptSelect2.value){
					alert("Debe seleccionar una opción");
				} else {
					let ul = document.getElementById("ul");
					let li = document.createElement("li");
					game.totalGame += 1;
					switch(ppt(pptSelect1.value, pptSelect2.value)) {
						case "empate": 
							li.innerHTML = `Ronda ${game.totalGame}: Empate`;
							break;
						case "jugador1": 
							li.innerHTML = `Ronda ${game.totalGame}: Gana Jugador 1`;
							game.jugador1 += 1;
							break;
						case "jugador2": 
							game.jugador2 += 1;
							li.innerHTML = `Ronda ${game.totalGame}: Gana Jugador 2`;
							break;
					}
					ul.appendChild(li);
					let result = document.getElementById("result");
					if(game.totalGame === 3) {						
						if(game.jugador1 > game.jugador2) {
							result.innerHTML = "El ganador del Juego es Jugador 1";
						} else if(game.jugador1 < game.jugador2) {
							result.innerHTML = "El ganador del Juego es Jugador 2";
						} else {
							result.innerHTML = "El Juego finaliza en empate";
						}
						ul.innerHTML = "";
						game.jugador1 = 0;
						game.jugador2 = 0;
						game.totalGame = 0;
					} else {
						result.innerHTML = "";
					}
					pptSelect1.value = "";
					pptSelect2.value = "";
				}
			}
		</script>
	</body>
</html>
